<div id="aoa-search-map">

  <div id="filters">

    <div id="filters-form-holder">
      <p>
        Fill in the form below in order to search the available documents.
      </p>
      <form method="GET" action="" name="filters-form" id="filters-form">
        <input type="text" name="text" size="45" id="description"
               placeholder="Search for title"
               class="input-text" />

        <div class="fields-separator">&nbsp;</div>

        <select name="theme" class="input-select">
          <option value="">Water + Green economy</option>
          <option tal:repeat="option options/filter_options/themes"
                  tal:attributes="value option"
                  tal:content="option"></option>
        </select>

        <select name="library" class="input-select">
          <option value="">All objects</option>
          <option value="virtual-library">Virtual library</option>
          <option value="other-objects">Other objects</option>
        </select>

        <div class="fields-separator">&nbsp;</div>

        <input type="text" name="year" placeholder="Publication year"
               class="input-text" id="year" size="14" />

        <input type="submit" value="Search" class="standalone"
               id="filter-button" />

        <input type="reset" value="Reset" class="standalone"
               id="reset-button" />

      </form>

    </div>

    <div id="countries-map"></div>

  </div>

  <div id="results">

    <div class="loading-animation hidden">
      <img src="++resource++eea.aoamap/ajax-loader.gif" />
      Searching...
    </div>

    <ul class="search-results">
      <div class="template" style="display: none">
        <li class="document">
          <a href="javascript:" class="title">${title}</a>
        </li>
      </div>
    </ul>
  </div>

  <div style="display: none">
  <div id="document-info">
    <div class="template">

      <div class="template-section">
        <div class="template-subsection">
          Author: ${author}
          {{if year}}(${year}){{/if}}
        </div>
      </div>

      <div class="template-section">
        <div class="template-subsection">
          Coverage: {{each country}}{{if $index}}, {{/if}}${$value}{{/each}}
          {{if region.length}}
            ({{each region}}{{if $index}}, {{/if}}${$value}{{/each}})
          {{/if}}
        </div>
      </div>

      <div class="template-section">
        <div class="template-subsection">
          Themes:
          {{each theme}}{{if $index}}, {{/if}}${$value}{{/each}}
          {{if document_type.length}}
              ({{each document_type}}{{if $index}}, {{/if}}${$value}{{/each}})
          {{/if}}
        </div>
      </div>

      {{if url}}
      <div class="template-section">
        <div class="template-subsection">
            Download:
            <a href="${url}" title="${title}">${M.ellipsis(url, 100)}</a>
        </div>
      </div>
      {{/if}}

    </div>
  </div>

  <div id="country-info">
    <div class="template">
      <span>
        ${name}: ${documents_total} assessments
        (<a class="link-green-economy-fiche">${documents_green_economy} green
        economy</a>, <a class="link-water-fiche">${documents_water} water</a>)
      </span>
    </div>
  </div>
  </div>

  <div class="visualClear">&nbsp;</div>
</div>
<div class="visualClear">&nbsp;</div>

<script type="text/javascript" src="++resource++eea.aoamap/proj4js-compressed.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/openlayers/OpenLayers.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/jquery.scrollTo.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/jquery-ui.min.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/jquery.tmpl.min.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/map.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/search.js"></script>
<script type="text/javascript" src="++resource++eea.aoamap/country_info.js"></script>
<script type="text/javascript" tal:content="structure string:
  M.config = ${options/map_config};
  M.jQuery = jQuery;
  jQuery.noConflict(true);
  M.jQuery(document).ready(function() {
    M.create_map_search({map_div: 'countries-map'});
  });
  "></script>
