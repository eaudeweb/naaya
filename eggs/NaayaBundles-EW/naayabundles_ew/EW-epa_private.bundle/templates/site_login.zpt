<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Login</title>

<style type="text/css">
.loginpage {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 0.85em;
	border: 1px solid #dbdbdb;
	background: #ebebeb;
	width: 50%;
	margin: 5% auto;
}


.loginpage h1 {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 1.5em;
	color: #000;
	margin: 0;
	padding: 0.5em 0 0.5em 0.5em;
	background: #fff;
	border-bottom: 1px solid #dbdbdb;
}
.loginpage h2 {
	font-family: Arial, Helvetica, sans-serif;
	font-size: 1.2em;
	color: #000;
	margin: 0.8em 0 0 0.8em;
	padding: 0;
}
.loginpage form, .loginpage p, .loginpage #log1 {
	margin: 1em;
}
.loginpage .field input { 
	margin: 0;
	border: 1px solid #cbcbcb;
	background: #fff;
	padding-left: 0.3em;
	color: #555;
}
.loginpage .field {
	margin: 0 0 0.5em 0;
}
</style>
</head>

<body>
<div class="loginpage">
<tal:block define="came_from python:request.get('came_from', here.getSite().absolute_url(1));
                   action_url python:came_from or 'logged_in'">

<tal:block define="user python:request.AUTHENTICATED_USER.getUserName()" condition="python:user!='Anonymous User'">
<tal:block define="auth_tool python:here.getAuthenticationTool();
                                user_obj python:auth_tool.getUser(request.AUTHENTICATED_USER.getUserName());">

<h1 i18n:translate="">Log out</h1>


<div id="log1"><tal:block  i18n:translate="">You are logged in as:</tal:block> <em><span tal:replace="user" /></em>.</div>
<div id="log1"><a tal:define="url python:here.absolute_url()" tal:attributes="href string:${url}/logout" i18n:translate="">Logout</a></div>
<p><a tal:attributes="href here/absolute_url" title="Back">Back to <em tal:content="here/title_or_id" /></a></p>
<br />
<div style="background-color: #fafafa; border: 1px solid #eee">
    <div style="background-color: #a0a0a0; font-weight: bold; color: white; line-height: 2em; text-align: center;" i18n:translate="">Tips</div>
    <ul style="list-style-type: none; padding: 0.5em; margin: 0">
        <li i18n:translate="" style="margin-bottom: 0.5em"><strong>&raquo;</strong> Having trouble logging out? Make sure that cookies are allowed in your browser</li>
        <li i18n:translate="" style="margin-bottom: 0.5em"><strong>&raquo;</strong> If you opened child browser windows from this one, those will maintain your authentication</li>
    </ul>
</div>
<tal:block tal:define="roles python:here.getAuthenticationTool().getAuthenticatedUserRoles()">
    <div tal:condition="python:user_obj is None">
		<!-- List roles for Zope user here -->
    </div>
    <tal:block tal:condition="python:len(roles) and user_obj is not None">
        You have the following rights in this portal:<br />
        <ul>
            <li tal:repeat="item roles">
                <span tal:replace="python:', '.join(item[0])" />
                on
                <a tal:define="object python:here.utGetObject(item[1])"
                    tal:attributes="href string:${object/absolute_url}/"
                    tal:content="object/title_or_id" />
            </li>
        </ul>
    </tal:block>
    <tal:block tal:condition="python:not len(roles)">
        You have no rights in this portal.
    </tal:block>
</tal:block>
<br />

</tal:block>
</tal:block>

<tal:block define="user python:request.AUTHENTICATED_USER.getUserName()" condition="python:user=='Anonymous User'">
<h1 i18n:translate="">Log in</h1>



<h2 i18n:translate="">Existing user</h2>
<form tal:attributes="action action_url" method="POST">

<tal:block define="retry python:request.get('retry', '')">
<div id="log1" tal:condition="python:retry=='1'" i18n:translate="">
    The username or password you provided are incorrect or this account doesn't have
    enough rights to access this resource. Please try again.
</div>
</tal:block>

<span tal:condition="python:came_from!=''">
    <input type="hidden" name="came_from" tal:attributes="value came_from" />
</span>

<div class="field">
    <label for="__ac_name" i18n:translate="">Username</label>
    <input type="text" name="__ac_name" id="__ac_name" size="20"
        tal:attributes="value python:request.get('__ac_name', '')" />
</div>

<div class="field">
    <label for="__ac_password" i18n:translate="">Password</label>
    <input type="password" name="__ac_password" id="__ac_password" size="20" />
</div>

<div class="field">
    <input type="submit" name="submit" value=" Login " i18n:attributes="value" />
</div>

</form>
<div style="background-color: #fafafa; border: 1px solid #eee">
    <div style="background-color: #a0a0a0; font-weight: bold; color: white; line-height: 2em; text-align: center;" i18n:translate="">Tips</div>
    <ul style="list-style-type: none; padding: 0.5em; margin: 0">
        <li i18n:translate="" style="margin-bottom: 0.5em"><strong>&raquo;</strong> Having trouble logging in? Make sure that cookies are allowed in your browser</li>
        <li i18n:translate="" style="margin-bottom: 0.5em"><strong>&raquo;</strong> Don't forget to logout or exit your browser when you're done</li>
        <li i18n:translate="" style="margin-bottom: 0.5em"><strong>&raquo;</strong> Letting your browser to remember your username or password on this machine can be dangerous since other people might use this account to log in</li>
    </ul>
</div>
</tal:block>


</tal:block>
</div>
</body>
</html>
